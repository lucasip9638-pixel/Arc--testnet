<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deploy TokenSwap - Remix IDE</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1e1e1e;
            color: #d4d4d4;
        }
        .container {
            background: #252526;
            padding: 30px;
            border-radius: 8px;
            margin: 20px 0;
        }
        h1 {
            color: #4ec9b0;
            border-bottom: 2px solid #4ec9b0;
            padding-bottom: 10px;
        }
        h2 {
            color: #569cd6;
            margin-top: 30px;
        }
        .step {
            background: #2d2d30;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #007acc;
            border-radius: 4px;
        }
        .code {
            background: #1e1e1e;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 10px 0;
        }
        .button {
            background: #007acc;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            text-decoration: none;
            display: inline-block;
        }
        .button:hover {
            background: #005a9e;
        }
        .success {
            background: #0e639c;
            color: white;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .warning {
            background: #d67e00;
            color: white;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .copy-btn {
            background: #4ec9b0;
            color: #1e1e1e;
            padding: 5px 10px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Deploy TokenSwap - Remix IDE</h1>
        
        <div class="success">
            <strong>‚úÖ Sua carteira j√° tem USDC!</strong> Voc√™ est√° pronto para fazer o deploy.
        </div>

        <h2>üìã Passo 1: Abrir Remix IDE</h2>
        <div class="step">
            <a href="https://remix.ethereum.org" target="_blank" class="button">üåê Abrir Remix IDE</a>
            <p>O Remix abrir√° em uma nova aba do navegador.</p>
        </div>

        <h2>üìù Passo 2: Criar Arquivo TokenSwap.sol</h2>
        <div class="step">
            <ol>
                <li>No Remix, clique em <strong>"contracts"</strong> na pasta esquerda</li>
                <li>Clique no √≠cone <strong>"New File"</strong> (ou bot√£o direito ‚Üí New File)</li>
                <li>Nome do arquivo: <strong>TokenSwap.sol</strong></li>
                <li>Cole o c√≥digo abaixo:</li>
            </ol>
            <div class="code" id="contractCode">
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

interface IERC20 {
    function transferFrom(address sender, address recipient, uint256 amount) external returns (bool);
    function transfer(address recipient, uint256 amount) external returns (bool);
    function balanceOf(address account) external view returns (uint256);
    function approve(address spender, uint256 amount) external returns (bool);
}

contract TokenSwap {
    address public owner;
    
    address public immutable USDC;
    address public immutable EURC;
    
    uint256 public exchangeRate = 1000000; // 1:1 by default
    uint256 public swapFee = 30; // 0.3%
    uint256 public constant FEE_DENOMINATOR = 10000;
    
    event Swapped(address indexed user, address indexed fromToken, address indexed toToken, uint256 amountIn, uint256 amountOut);
    event ExchangeRateUpdated(uint256 newRate);
    event FeeUpdated(uint256 newFee);
    
    modifier onlyOwner() {
        require(msg.sender == owner, "Not owner");
        _;
    }
    
    constructor(address _usdc, address _eurc) {
        owner = msg.sender;
        USDC = _usdc;
        EURC = _eurc;
    }
    
    function swapUSDCtoEURC(uint256 amount) external {
        require(amount > 0, "Amount must be greater than 0");
        uint256 feeAmount = (amount * swapFee) / FEE_DENOMINATOR;
        uint256 amountAfterFee = amount - feeAmount;
        uint256 outputAmount = (amountAfterFee * exchangeRate) / 1e6;
        require(IERC20(USDC).transferFrom(msg.sender, address(this), amount), "USDC transfer failed");
        require(IERC20(EURC).transfer(msg.sender, outputAmount), "EURC transfer failed");
        emit Swapped(msg.sender, USDC, EURC, amount, outputAmount);
    }
    
    function swapEURCtoUSDC(uint256 amount) external {
        require(amount > 0, "Amount must be greater than 0");
        uint256 feeAmount = (amount * swapFee) / FEE_DENOMINATOR;
        uint256 amountAfterFee = amount - feeAmount;
        uint256 outputAmount = (amountAfterFee * 1e6) / exchangeRate;
        require(IERC20(EURC).transferFrom(msg.sender, address(this), amount), "EURC transfer failed");
        require(IERC20(USDC).transfer(msg.sender, outputAmount), "USDC transfer failed");
        emit Swapped(msg.sender, EURC, USDC, amount, outputAmount);
    }
    
    function setExchangeRate(uint256 _newRate) external onlyOwner {
        require(_newRate > 0, "Rate must be greater than 0");
        exchangeRate = _newRate;
        emit ExchangeRateUpdated(_newRate);
    }
    
    function setSwapFee(uint256 _newFee) external onlyOwner {
        require(_newFee <= 1000, "Fee too high");
        swapFee = _newFee;
        emit FeeUpdated(_newFee);
    }
    
    function withdrawTokens(address token, uint256 amount) external onlyOwner {
        require(IERC20(token).transfer(owner, amount), "Transfer failed");
    }
}
            </div>
            <button class="copy-btn" onclick="copyCode()">üìã Copiar C√≥digo</button>
        </div>

        <h2>‚öôÔ∏è Passo 3: Compilar</h2>
        <div class="step">
            <ol>
                <li>Clique na aba <strong>"Solidity Compiler"</strong> (√≠cone de compilador √† esquerda)</li>
                <li>Selecione vers√£o: <strong>0.8.20</strong> ou superior</li>
                <li>Clique em <strong>"Compile TokenSwap.sol"</strong></li>
                <li>Deve aparecer: <strong>‚úì compilation successful</strong></li>
            </ol>
        </div>

        <h2>üîó Passo 4: Configurar MetaMask</h2>
        <div class="step">
            <div class="warning">
                <strong>‚ö†Ô∏è Importante:</strong> Certifique-se de que sua carteira est√° importada no MetaMask e voc√™ est√° na Arc Testnet!
            </div>
            <ol>
                <li>Abra MetaMask</li>
                <li>Se ainda n√£o importou, clique em "Importar conta" e cole a chave privada do arquivo <code>.env.deployer</code></li>
                <li>Adicione Arc Testnet (se ainda n√£o tiver):
                    <div class="code">
Network Name: Arc Testnet<br>
RPC URL: https://rpc.testnet.arc.network<br>
Chain ID: 5042002<br>
Currency Symbol: USDC<br>
Block Explorer: https://testnet.arcscan.app
                    </div>
                </li>
                <li>Certifique-se de estar na <strong>Arc Testnet</strong> no MetaMask</li>
            </ol>
        </div>

        <h2>üöÄ Passo 5: Deploy</h2>
        <div class="step">
            <ol>
                <li>No Remix, v√° para aba <strong>"Deploy & Run Transactions"</strong></li>
                <li>Em <strong>"Environment"</strong>, selecione: <strong>"Injected Provider - MetaMask"</strong></li>
                <li>Certifique-se de estar na <strong>Arc Testnet</strong></li>
                <li>No campo <strong>"Deploy"</strong>, voc√™ ver√° o construtor do contrato</li>
                <li>Preencha os par√¢metros:
                    <div class="code">
_usdc: 0x3600000000000000000000000000000000000000<br>
_eurc: 0x89B50855Aa3bE2F677cD6303Cec089B5F319D72a
                    </div>
                    <button class="copy-btn" onclick="copyParams()">üìã Copiar Par√¢metros</button>
                </li>
                <li>Clique em <strong>"Deploy"</strong></li>
                <li>Confirme a transa√ß√£o no MetaMask</li>
                <li>Aguarde a confirma√ß√£o (pode levar alguns segundos)</li>
            </ol>
        </div>

        <h2>üìã Passo 6: Copiar Endere√ßo do Contrato</h2>
        <div class="step">
            <ol>
                <li>Ap√≥s o deploy, o contrato aparecer√° em <strong>"Deployed Contracts"</strong></li>
                <li>Clique no contrato para expandir</li>
                <li><strong>Copie o endere√ßo do contrato</strong> (aparece acima das fun√ß√µes, come√ßa com 0x...)</li>
                <li>Cole o endere√ßo aqui para atualizar automaticamente:
                    <input type="text" id="contractAddress" placeholder="0x..." style="width: 500px; padding: 8px; margin: 10px 0; background: #1e1e1e; color: #d4d4d4; border: 1px solid #007acc; border-radius: 4px;">
                    <button class="button" onclick="updateFrontend()">‚úÖ Atualizar Frontend</button>
                </li>
            </ol>
        </div>

        <h2>üí∞ Passo 7: Financiar o Contrato</h2>
        <div class="step">
            <p>O contrato precisa ter USDC e EURC para permitir swaps:</p>
            <ol>
                <li>Transfira USDC para o endere√ßo do contrato</li>
                <li>Transfira EURC para o endere√ßo do contrato</li>
                <li>Voc√™ pode fazer isso pelo MetaMask ou pelo frontend ap√≥s conectar a carteira</li>
            </ol>
        </div>

        <h2>‚úÖ Passo 8: Testar!</h2>
        <div class="step">
            <ol>
                <li>Execute: <code>npm run dev</code></li>
                <li>Acesse: <a href="http://localhost:3000" target="_blank">http://localhost:3000</a></li>
                <li>Conecte MetaMask</li>
                <li>V√° para aba <strong>"Swap"</strong></li>
                <li>Teste um swap!</li>
            </ol>
        </div>

        <div class="success" style="margin-top: 30px;">
            <strong>üéâ Pronto!</strong> Seu contrato est√° deployado e pronto para uso!
        </div>
    </div>

    <script>
        function copyCode() {
            const code = document.getElementById('contractCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('‚úÖ C√≥digo copiado! Cole no Remix.');
            });
        }

        function copyParams() {
            const params = `0x3600000000000000000000000000000000000000, 0x89B50855Aa3bE2F677cD6303Cec089B5F319D72a`;
            navigator.clipboard.writeText(params).then(() => {
                alert('‚úÖ Par√¢metros copiados!');
            });
        }

        function updateFrontend() {
            const address = document.getElementById('contractAddress').value.trim();
            if (!address || !address.startsWith('0x')) {
                alert('‚ùå Endere√ßo inv√°lido! Deve come√ßar com 0x');
                return;
            }
            
            // This would need to be done server-side or via a script
            alert('üìù Copie este endere√ßo e atualize manualmente o arquivo lib/swap-contract.ts:\n\n' + 
                  'export const SWAP_CONTRACT_ADDRESS = "' + address + '" as `0x${string}`');
        }
    </script>
</body>
</html>

